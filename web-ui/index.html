<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Analyst Assistant</title>
    <link rel="icon" type="image/x-icon" href="/static/financial-analysis.ico">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Authentication Container -->
    <div class="auth-container" id="authContainer">
        <div class="auth-card">
            <div class="auth-header">
                <h1>Financial Analyst Assistant</h1>
                <p>AI-powered financial analysis and insights</p>
            </div>

            <!-- Login Form -->
            <div id="loginForm">
                <form id="loginFormEl">
                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" required>
                    </div>
                    <button type="submit" class="btn" id="loginBtn">Sign In</button>
                </form>
                <div class="auth-switch">
                    <span>Don't have an account? </span>
                    <a href="#" id="showRegister">Create one</a>
                </div>
            </div>

            <!-- Register Form -->
            <div id="registerForm" style="display: none;">
                <form id="registerFormEl">
                    <div class="form-group">
                        <label for="registerEmail">Email</label>
                        <input type="email" id="registerEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="registerUsername">Username</label>
                        <input type="text" id="registerUsername" required>
                    </div>
                    <div class="form-group">
                        <label for="registerFirstName">First Name</label>
                        <input type="text" id="registerFirstName" required>
                    </div>
                    <div class="form-group">
                        <label for="registerLastName">Last Name</label>
                        <input type="text" id="registerLastName" required>
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">Password</label>
                        <input type="password" id="registerPassword" required>
                    </div>
                    <button type="submit" class="btn" id="registerBtn">Create Account</button>
                </form>
                <div class="auth-switch">
                    <span>Already have an account? </span>
                    <a href="#" id="showLogin">Sign in</a>
                </div>
            </div>

            <div class="error-message" id="authError" style="display: none;"></div>
        </div>
    </div>

    <!-- Chat Interface -->
    <div class="chat-container" id="chatContainer">
        <div class="chat-header">
            <h1 class="chat-title">Financial Analyst Assistant</h1>
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">A</div>
                <span id="userName">User</span>
                <button class="logout-btn" id="logoutBtn">Logout</button>
            </div>
        </div>

        <div class="chat-layout">
            <div class="conversations-sidebar" id="conversationsSidebar">
                <div class="sidebar-header">
                    <button class="new-chat-btn" id="newChatBtn">+ New Conversation</button>
                </div>
                <div id="conversationsList"></div>
            </div>

            <div class="chat-main">
                <div class="messages-container" id="messagesContainer">
                    <div class="message assistant">
                        <div class="message-avatar">AI</div>
                        <div class="message-content">
                            Welcome! I'm your Financial Analyst Assistant. I can help you analyze SEC filings for major tech companies including Apple (AAPL), Microsoft (MSFT), Google (GOOG), Amazon (AMZN), and Meta (META). Ask me about risk factors, management discussions, or any specific financial insights you need.
                        </div>
                    </div>
                </div>

                <div class="input-area">
                    <div class="input-container">
                        <textarea 
                            id="messageInput" 
                            class="message-input" 
                            placeholder="Ask about financial analysis, risk factors, management discussions..."
                            rows="1"
                        ></textarea>
                        <button class="send-btn" id="sendBtn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Context Menu for Conversations -->
    <div class="context-menu" id="contextMenu" style="display: none;">
        <div class="context-menu-item" id="renameConversation">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
            </svg>
            Rename
        </div>
        <div class="context-menu-item delete" id="deleteConversation">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
            </svg>
            Delete
        </div>
    </div>

    <!-- Rename Modal -->
    <div class="modal-overlay" id="renameModal" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3>Rename Conversation</h3>
            </div>
            <div class="modal-body">
                <input type="text" id="renameInput" class="modal-input" placeholder="Enter new name...">
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="cancelRename">Cancel</button>
                <button class="btn" id="confirmRename">Rename</button>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>